<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
    <title>GATOR</title>

    <link rel="stylesheet" type="text/css" href="css/no-theme/jquery-ui-1.7.2.custom.css"/>
    <link rel="stylesheet" type="text/css" href="css/gator.css"/>
    <script type="text/javascript">
    window.svgns = 'http://www.w3.org/2000/svg';
    </script>
    
<!--   <script type="text/javascript" src="js/svgweb/svg.js" data-path="js/svgweb/"></script>-->
    
    <script type="text/javascript" src="js/maschup.min.js"></script>
    
    <!-- <script type="text/javascript" src="js/maschup.services.min.js"></script> -->

<!--

    <script type="text/javascript" src="js/lib/TagVisualisation.js"></script>

    <script type="text/javascript" src="js/json-2.js"></script>
    <script type="text/javascript" src="js/lib/MascpService.js"></script>
    <script type="text/javascript" src="js/lib/AtProteomeReader.js"></script>
    <script type="text/javascript" src="js/lib/AtPeptideReader.js"></script>
    <script type="text/javascript" src="js/lib/AtChloroReader.js"></script>    
    <script type="text/javascript" src="js/lib/PhosphatReader.js"></script>
    <script type="text/javascript" src="js/lib/PromexReader.js"></script>
    <script type="text/javascript" src="js/lib/SubaReader.js"></script>
    <script type="text/javascript" src="js/lib/RippdbReader.js"></script>
    <script type="text/javascript" src="js/lib/PpdbReader.js"></script>
    <script type="text/javascript" src="js/lib/TairReader.js"></script>
    

    <script type="text/javascript" src="js/lib/gomap.js"></script>
    <script type="text/javascript" src="js/lib/SequenceRenderer.js"></script>
    <script type="text/javascript" src="js/lib/CondensedSequenceRenderer.js"></script>

-->

    <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.4.1.js"></script>

    <script type="text/javascript" src="js/jquery-ui-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.masonry.min.js"></script>
    <script type="text/javascript" src="js/gator-conf.js"></script>
    <script type="text/javascript" src="js/gator.js"></script>
    <script type="text/javascript" src="js/filetojson.js"></script>

    <style type="text/css">


    </style>
</head>

<body>
    
<div style="position: absolute; top: 10px; left: 10px; width: 25%; display: none;">
    <h1 style="position: absolute; left: 0px; top: 0px; margin: 0px; width: 100%; font-size: 10px; "><span>MASCP AggreGATOR</span><img style="height: 50px; top: 50%; left: -7px; position: absolute;" src="gator.png" /></h1>
</div>
<div id="log" style="position: fixed; top: 0px; left: 0px;">
</div>

<a style="display: block; position: absolute; top: 10px; left: 10px; width: 90px; height: 68px; background-image: url(http://www.masc-proteomics.org/mascp/skins/common/images/mascp_logo.png);" href="http://www.masc-proteomics.org/" title="MASC Proteomics portal"></a>
<div id="agi_input" class="rounded_box" style="">
    <label class="inset" for="agi">AGI </label><input size="12" id="agi" type="text" name="agi" value="at3g15450.1"/><a href="multiple.html" target="_new">Advanced</a><input type="button" value="Retrieve"/>
</div>
<div id="description_container" class="rounded_box">
<div class="inset">Protein description</div>
<div id="description">
</div>
</div>
<div id="help_container" class="rounded_box">
<div class="inset">Help</div>
<div id="help">
    <p>
    <a href="http://www.masc-proteomics.org/mascp/index.php/Gator">Help</a>
    </p>
    <p>
        <a href="http://www.masc-proteomics.org/mascp/index.php/Gator#Citation">Cite</a><a href="http://gator.masc-proteomics.org/source">Code</a>
    </p>
</div>
</div>
<div id="sequence_control">
    <ul style="margin-bottom: 10px;" id="sequence_controllers">
    <!--    <li id="phosphat_theoretical"><input type="checkbox"/> PhosPhAT theoretical</li>-->
        <li id="promex_placeholder"><input type="checkbox"/> ProMeX</li>
        <li id="ppdb_placeholder"><input type="checkbox"/> PPDB</li>
        <li id="atproteome_placeholder"><input type="checkbox"/> ATProteome</li>
        <li id="atpeptide_placeholder"><input type="checkbox"/> AtPeptide</li>
        <li id="atchloro_experimental"><input type="checkbox"> AtChloro</li>
        <li id="phosphat_experimental"><input type="checkbox"/> Phosphorylation </li>
        <li id="prippdb_experimental"><input type="checkbox"/> Phosphorylation (RippDB) </li>        
        <li id="hydropathy"><input type="checkbox"/> Hydropathy plot</li>
    </ul>
</div>
<div style="top: 100px; position: relative;">
<button id="controls"><span>Data settings</span></button>
</div>
<div style="position: relative; top: 100px;">
<div>
    <div style="overflow: hidden; width: auto; height: 100%;">
        <div id="condensed_container">        
        </div>
        <div id="hydropathy_container" style="margin-bottom: 10px;">
        </div>
    </div>
</div>

<div style="width: 100%; overflow: auto; padding-bottom: 10px;">
    <div id="sequence_container" style="font-family: monospace;">
    </div>
</div>

<input type="button" value="Panning" id="clicker"/>

<div style="position: relative;">
    <div id="suba" class="rounded_box">
        <div class="inset">Subcellular localisation</div>
        <p><span style="color: #00ff00; font-weight: bolder;">GREEN</span>: Fluorescent Protein data, <span style="color: #ff0000; font-weight: bolder;">RED</span>: Proteomic data, <span style="color: #999999; font-weight: bolder;">GRAY</span>: Predicted</p>
        <div id="suba_results">
        </div>
    </div>
    <div id="tissue" class="rounded_box">
        <div class="inset">Organ evidence</div>
        <div id="tissue_results">
        </div>
    </div>
</div>

<div id="links_container" class="rounded_box">
<div class="inset">Data sources</div>
<div id="user_container"><textarea id="userdata"></textarea></div>
<div id="links"></div>
<div style="clear: both; float: none; width: 100%; height: 0px;"></div>
</div>

</div>
<script type="text/javascript">
//<[CDATA[ 
    window.onload = null;
        
    var showIESplash = function() {
        var splash = document.getElementById('ie_splash');
        splash.style.display = 'block';
        
        splash.hideForever = function() {
            var date = new Date();
            date.setTime(date.getTime()+(365*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
            document.cookie = 'iesplash=true'+expires+'; path=/';
            splash.style.display = 'none';
        };
        
        splash.hide = function() {
            splash.style.display = 'none';
        };
        
    };
    
    jQuery(document).ready(function() {
                        
        if(!Array.indexOf){
            Array.prototype.indexOf = function(obj){
                for(var i=0; i<this.length; i++){
                    if(this[i]==obj){
                        return i;
                    }
                }
                return -1;
            }
        }
        
        // Trigger the change event on page load
        var hash = window.location.hash.replace(/#/g,'');
        if(hash) {
            jQuery('#agi')[0].value = hash;
        } else {
            jQuery('#agi_input').addClass('first_run');
            jQuery('#agi').bind('blur',function() {
                jQuery('#agi_input').removeClass('first_run');
            }).bind('change',function(e,forced) {
                if (! forced) {
                    jQuery('#agi_input').removeClass('first_run');
                }
            }).focus();
        }
                
        jQuery('#agi').trigger(MASCP.IE ? 'blur' : 'change',[true]);
    });


    var change_func = function(e) {
        var agi = this.value;
        
        if (! agi.match(/\.\d$/)) {
            agi = agi + '.1';
        }
        
        if ( ! agi.match(/[aA].*\d+\.\d/)) {
            return;
        }
        
        this.value = agi;
        
        if (agi.length < 1) {
            return;
        }

        //add modal background
        if ( ! document._screen ) {
            document._screen = $('<div />').addClass('screen').appendTo('body');
        }
        document._screen.show();


        for (var groupname in MASCP.groups) {
            MASCP.renderer.hideGroup(groupname);
        }
        
        for (var layername in MASCP.layers) {
            MASCP.renderer.hideLayer(layername);
        }
        
        var reader = new MASCP.TairReader(agi);
        jQuery(reader).bind('resultReceived',function() {
            if (this.result.getSequence() == null || this.result.getSequence() == '') {
                document._screen.hide();
                return;
            }
            if (! jQuery('#agi_input').hasClass('first_run')) {
                window.location.hash = agi;
            }
            jQuery('#description').text(this.result.getDescription());
            MASCP.renderer.setSequence(this.result.getSequence());
        }).bind('error',function() {
            document._screen.hide();            
        });
        reader.retrieve();
    };

    if (MASCP.IE) {
        jQuery("#agi").bind('blur',change_func);
    } else {
        jQuery('#agi').bind('change',change_func);
    }
//]]>
</script>
<table align="center" style="margin-top: 400px; display: none;">
	<tr><td colspan="5">The MASC Proteomics Gator is a resource maintained by the following institutions</td></tr>
<tr>
    	<td><a href="http://www.jbei.org/" title="Joint BioEnergy Institute"><img src="img/jbei-logo_tonal.png" alt="Joint BioEnergy Institute" width="150" border="0"></a></td>
	  <td><a href="http://www.plantenergy.uwa.edu.au/" title="Plant Energy Biology"><img src="img/CPEB.jpg" alt="Plant Energy Biology" border="0" width="200"></a>        </td>
        <td><a href="http://www.univie.ac.at/" title="Universitat Wien"><img src="img/uni_wien_logo.jpg" alt="University of Vienna" width="200" border="0"></a></td>
	  <td><a href="http://www.ethz.ch/index_EN" title="Swiss Federal Institute of Technology"><img src="img/eth_logo.jpg" alt="Swiss Federal Institute of Technology" border="0" width="200"></a></td>
    <td><a href="http://www.cornell.edu/" title="Cornell University"><img src="img/cornell-logo.jpg" alt="Cornell University" border="0" width="150"></a></td>
	</tr>
</table>

<div id="ie_splash" style="display: none; background: #ffffff; border: solid black 2px; width: 50%; left: 25%; top: 5%; height: 80%; position: fixed; padding: 20px;">
    <h3>Browser compatibility</h3>
    <img src="img/condensed.png" style="width: 90%;"/>
    <p>Your current web browser cannot display interactive sequence information, and as such, a fallback technology has been used. The behaviour of the site may be sub-optimal. It is recommended to use a current browser such as <a href="http://www.getfirefox.net/">Firefox</a>, <a href="http://www.google.com/chrome">Google Chrome</a>, <a href="http://code.google.com/chrome/chromeframe/">Google Chrome frame</a> or <a href="http://apple.com/safari">Safari</a> to
        use this tool.
    </p>
    <button onclick="document.getElementById('ie_splash').hideForever();">Never show again</button>
    <button onclick="document.getElementById('ie_splash').hide();">Hide</button>
</div>

</body>
</html>
