<!DOCTYPE html>
<html>
<head>
	<script src="dist/js/mascp-jstools.js"></script>
	<title>Demo</title>
  <style type="text/css">
    #fixed {
      --fill-viewer: 'yes';
      width: 685px;
      height: 400px;
    }
    #static {
      width: 400px;
      height: 200px;
    }
  </style>
</head>
<body>
  <x-protviewer interactive ></x-protviewer>
  <x-protviewer id="fixed" interactive ></x-protviewer>
  <x-protviewer id="static"></x-protviewer>

<script>


window.onload = function() {
	(function(global) {
    
let show_uniprot = function(renderer,uniprot) {
  MASCP.GATOR_CLIENT_ID='fNED1UGvPaP0XlrcEvWsHXIODIKy6WVB';
  MASCP.GatorDataReader.server = 'https://glycodomain.glycomics.ku.dk';
  MASCP.GatorDataReader.anonymous = true;
  return MASCP.GatorDataReader.authenticate().then(function(url_base) {
    let a_reader = new MASCP.UniprotReader();
    return new Promise((resolve,reject) => {
    a_reader.retrieve(uniprot, function(err) {
      renderer.setSequence(this.result._raw_data.data[0]);
      resolve(uniprot);
    });
    });
  });
};
  
global.showUniprot = show_uniprot;
  
})(window);
  

Promise.all(
  [ showUniprot(document.querySelectorAll('x-protviewer')[2].renderer,'Q14112'),
    showUniprot(document.querySelectorAll('x-protviewer')[1].renderer,'Q14118'),
    showUniprot(document.querySelectorAll('x-protviewer')[0].renderer,'Q14112') ])
.then( () => {
  for (let el of document.querySelectorAll('x-protviewer')) {
    el.createTrack('sometrack');
    el.createTrack('someothertrack');
    let renderer = el.renderer;
    renderer.renderObjects('sometrack',[{aa: 200, type: 'marker', options: { bare_element:true,
    height: 18,
    offset: -1,
    content:"#sugar_man"} }]);

    renderer.renderObjects('someothertrack',[{aa: 210, type: 'marker', options: { bare_element:true,
    height: 18,
    offset: -1,
    content:"#sugar_gal"} }]);
    el.fitToZoom();
    renderer.refresh();
    renderer.zoom -= 0.01;
  }
});
};
</script>
</body>
</html>