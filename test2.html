<html>
<head>
<script src="dist/js/mascp-jstools.js"></script>
</head>
<body>
	<div style="padding: 30px;">
	<gator-uniprot id="blaz" auto="true" style="height: 300px; overflow: auto;" interactive="true" zoom="auto" geneid="1605" accession="q14118" exonmargin="300" caching="true">
	<gator-track id="fooz" name="mutations">
		<gator-localdata id="foo" caching="true" ></gator-localdata>
	</gator-track>
	<gator-track  name="muppets">
	</gator-track>

	</gator-uniprot>
	</div>
	<script>
		window.fakeblah = function() {
			return function renderData(seq,datas) {
				return [{ 'aa' : 100, 'type' : 'marker', 'width' : 1 ,'options': {
					'content' : Object.keys(datas)[0],
					'offset' : 1,
					'height' : 24,
					'events' : [{ 'type' : 'mousemove,mouseup,click,touchstart', 'data' : {'blah' : 'blaz'} }]
				} }];
			};
		}
		window.blah = function() {
			// document.getElementById('blaz').go();
			setTimeout(function() {
				document.getElementById('foo').data = {'q14118' : {'Faz' : 'bar'}};
				document.getElementById('foo').renderer = window.fakeblah();
				document.getElementById('foo').parentNode.go();
				document.getElementById('fooz').go();
				window.annotationRenderer.retrieve();
			},1000);
			window.annotationRenderer = new MASCP.EditableReader();
			window.anno_block = {};
			Object.observe(anno_block,function() {
				console.log("Saw a change");
				window.annotationRenderer.retrieve();
			});
			window.anno_block = { 'self' : [ {"id" : 1, "type": "symbol" , "color" : "#0f0", "index" : 200 }, {"id" : 2, "length": 100 ,"index" : 300, "color" : "#f00", "tag" : "Tagthing" } ] };
			window.annotationRenderer.annotations = anno_block;
			window.annotationRenderer.registerSequenceRenderer(document.getElementById('blaz').renderer, {'track' : 'mutations'});
		};
	</script>
</body>
</html>